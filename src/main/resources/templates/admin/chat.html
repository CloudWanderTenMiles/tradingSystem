<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>chatroom</title>
    <link rel="stylesheet" th:href="@{/css/amazeui.min.css}" />
    <link rel="stylesheet" th:href="@{/css/main.css}" />
    <link rel="stylesheet" th:href="@{/webjars/layui/2.5.7/css/layui.css}" media="all">
    <script type="text/javascript" th:src="@{/js/jquery.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/amazeui.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/zUI.js}"></script>
    <script type="text/javascript" th:src="@{/js/wechat.js}"></script>
</head>
<body>
<div class="box">
    <div class="wechat">
        <div class="sidestrip">
            <div class="am-dropdown" data-am-dropdown>
                <!--头像插件-->
                <div class="own_head am-dropdown-toggle"></div>
                <div class="am-dropdown-content">
                    <div class="own_head_top">
                        <div class="own_head_top_text">
                            <p class="own_name">[[${name}]]<img th:src="@{/image/head.png}" alt="" /></p>
                            <p class="own_numb">account: [[${id}]]</p>
                        </div>
                        <img src="images/own_head.jpg" alt="" />
                    </div>
                </div>
            </div>
            <div class="sidestrip_icon">
                <a id="si_1" href="/admin/home" style="color: green"><icon class="layui-icon">&#xe65c;</icon></a>
            </div>
        </div>

        <!--聊天列表-->
        <div class="middle on">
            <div class="wx_search">
                <input type="text" placeholder="search"/>
                <button>+</button>
            </div>
            <div class="office_text">
                <ul class="user_list">
                    <li class="user_active">
                        <div class="user_head"><img src="images/head/15.jpg"/></div>
                        <div class="user_text">
                            <p class="user_name">早安无恙</p>
                            <p class="user_message">我是傻逼！，金少凯牛逼！</p>
                        </div>
                        <div class="user_time">下午 2：54</div>
                    </li>
                </ul>
            </div>
        </div>

        <!--聊天窗口-->
        <div class="talk_window">
            <div class="windows_top">
                <div class="windows_top_box">
                    <span>早安无恙</span>
                </div>
            </div>

            <!--聊天内容-->
            <div class="windows_body">
                <div class="office_text" style="height: 100%;">
                    <ul class="content" id="chatbox">
                        <li class="me"><img src="images/own_head.jpg" title="金少凯"><span>疾风知劲草，板荡识诚臣</span></li>
                        <li class="other"><img src="images/head/15.jpg" title="张文超"><span>勇夫安知义，智者必怀仁</span></li>
                    </ul>
                </div>
            </div>

            <div class="windows_input" id="talkbox">
                <div class="input_icon">
                </div>
                <div class="input_box">
                    <textarea name="" rows="" cols="" id="input_box"></textarea>
                    <button id="send">send</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    window.onload=function(){
        function b(){
            let text = document.getElementById('input_box');
            let chat = document.getElementById('chatbox');
            let btn = document.getElementById('send');
            let talk = document.getElementById('talkbox');
            btn.onclick=function(){
                if(text.value === ''){
                    alert('不能发送空消息');
                }else{
                    chat.innerHTML += '<li class="me"><img src="'+'images/own_head.jpg'+'"><span>'+text.value+'</span></li>';
                    text.value = '';
                    chat.scrollTop=chat.scrollHeight;
                    talk.style.background="#fff";
                    text.style.background="#fff";
                }
            }
        }
        b();
    };
</script>
</body>
</html>